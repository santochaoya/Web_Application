<template>    <div>        <header>            <div class="headline">                <a>                    <strong>FindHopes</strong>                </a>            </div>        </header>        <div class="button-back" style="margin-top:80px;"><router-link :to="{ name:'projects' }"><sgrong>Back</sgrong></router-link></div>        <div>            <div>                <div>                    <div>                        <h3>Create a new project</h3>                    </div>                </div>                <div>                    <div>                        <form>                            <div>                                <h5>&nbsp&nbspProject Detail</h5>                            </div>                            <div class="labelInfo">                                <label for="pro_title" class="labelInfo" style="color: black">Project Title</label>                                    <span style="color:red">*</span>                                <div>                                    <input type="text" class="text-username1" id="pro_title" name="pro_title" placeholder="Project Title" v-model="pro_title">                                </div>                            </div>                            <div class="labelInfo">                                <label for="pro_subtitle" class="labelInfo" style="color: black">Project Subtitle</label>                                <span style="color:red">*</span>                                <div >                                    <input type="text" class="text-username1" id="pro_subtitle" name="pro_subtitle" placeholder="Project Subtitle" v-model="pro_subtitle">                                </div>                            </div>                            <div class="labelInfo">                                <label for="pro_target" class="labelInfo" style="color: black">Target</label>                                <span style="color:red">*</span>                                <div>                                    <input type="text" class="text-username1" id="pro_target" name="pro_target" placeholder="Target" v-model="pro_target">                                </div>                            </div>                            <div class="labelInfo" id="creators">                                <label class="labelInfo" style="color: black">Creator ID</label>                                <span style="color:red">*</span>                                <div :index="index" v-for="(creator,index) in creators">                                    <input type="text" class="text-username1" name="creator_id" placeholder="Creator ID" v-model="creators[index]">                                </div>                                <div col-lg-1><span class="fa fa-plus-circle col-12" style="color:green" @click="creator_plus()"></span><span class="fa fa-minus-circle col-12" style="color:red" @click="creator_minus()"></span></div>                            </div>                            <div class="labelInfo">                                <label for="pro_desc" class="labelInfo" style="color: black">Description</label>                                <div>                                    <textarea type="text" class="text-username1" rows="5" id="pro_desc" name="pro_desc" placeholder="Description" v-model="pro_desc"></textarea>                                </div>                            </div>                            <hr>                            <div>                                <h5>&nbsp&nbspRewards Detail</h5>                            </div>                            <div :index="index_reward" v-for="(amount, index_reward) in reward_amount">                                <div class="labelInfo">                                    <label class="labelInfo" style="color: black">Amount</label>                                    <div>                                        <input type="text" class="text-username1" name="reward_amount" placeholder="Amount" v-model="reward_amount[index_reward]">                                    </div>                                </div>                                <div class="labelInfo">                                    <label class="labelInfo">Description</label>                                    <div>                                        <textarea type="text" class="text-username1" rows="5" name="reward_desc" placeholder="Description" v-model="reward_desc[index_reward]"></textarea>                                    </div>                                </div>                            </div>                            <button class="button-login" type="button" @click="add_reward()">Add new</button>                            <br>                            <hr>                            <div >                                <label  style="color:red">{{error_msg}}</label>                                <div>                                    <button type="button" class="button-login" @click="createProject()">                                        Submit                                    </button>                                </div>                                &nbsp&nbsp&nbsp&nbsp                                <div>                                    <button type="button" class="button-login" style="margin-top: 10px" onclick="window.location.href='http://localhost:8080/account'">                                        Cancel                                    </button>                                </div>                            </div>                        </form>                    </div>                </div>            </div>        </div>        <router-view></router-view>    </div></template><script>    export default {        data() {            return {                user_id:this.$session.get('id'),                login_username:this.$session.get('username'),                session_token: this.$session.get('token'),                pro_title: '',                pro_subtitle:'',                pro_target:'',                pro_desc:'',                reward_amount:[''],                reward_desc:[''],                error_msg:'',                creators: [''],            }        },        methods: {            log_out() {                console.log(this.$session.get('token'));                this.$http.post('http://csse-s365.canterbury.ac.nz:5199/api/v2/users/logout/',                    {},                    {                        headers:                            {                                'X-Authorization': this.$session.get('token')                            },                    },                ).then(function(res){                    this.$router.push({path: './'});                    window.sessionStorage.setItem('islogin',false);                    this.$session.destroy();                }, function (err) {                    console.log(err);                })            },            createProject() {                this.$router.push({path: '/createProject'});            },            userProject() {                this.$router.push({path: '/userProject'});            },            my_pledge() {                this.$router.push({path: '/my_pledge'});            },            my_profile() {                this.$router.push({path: '/profile'});            },            modify_user() {                this.$router.push({path: '/user_modify'});            },            default_createProject(){                this.pro_title= '';                this.pro_subtitle='';                this.pro_target='';                this.pro_desc='';                this.reward_amount=[''];                this.reward_desc=[''];                this.error_msg='';                this.creators=[''];            },            createProject(){                let creators1 = [];                for(let creator_id of this.creators){                    if(creator_id!='') {                        creators1.push({"id": parseInt(creator_id)});                    }                }                if(this.creators.indexOf(this.$session.get('id').toString())==-1){                    this.error_msg='Creators must include yourself';                }else{                    let rewards =[];                    let create_json;                    if(this.reward_amount[0] != '') {                        for (let num in this.reward_amount) {                            if (this.reward_amount[num] != '' && this.reward_desc[num] != '') {                                rewards.push({"amount": parseInt(this.reward_amount[num]), "description": this.reward_desc[num]});                            }                        }                        create_json={                            "title":this.pro_title,                            "subtitle":this.pro_subtitle,                            "description": this.pro_desc,                            "target": parseInt(this.pro_target),                            "creators": creators1,                            "rewards": rewards                        }                    }else{                        create_json={                            "title":this.pro_title,                            "subtitle":this.pro_subtitle,                            "description": this.pro_desc,                            "target": parseInt(this.pro_target),                            "creators": creators1                        }                    }                    if(this.pro_title!=''&&this.pro_subtitle!=''&&this.pro_target!=''&&creators1.length!=0){                        this.$http.post('http://csse-s365.canterbury.ac.nz:5199/api/v2/projects/',create_json                            ,                            {                                headers: {                                    'X-Authorization': this.$session.get('token')                                }                            })                            .then(function (res) {                                this.default_createProject();                                this.$router.push({path:'/userProject'});                            }, function (err) {                                this.error_msg='ERROR! Pls check enter info and try again later';                            })                    }else{                        this.error_msg='red* options can not be empty';                    }                }            },            creator_plus(){                if(this.creators.length <4){                    this.creators.push('');                }            },            creator_minus(){                if(this.creators.length >1){                    this.creators.pop();                }            },            add_reward(){                if(this.reward_amount.length<4) {                    this.reward_amount.push('');                    this.reward_desc.push('');                }            }        }    }</script>