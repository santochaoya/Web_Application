<template>    <div>        <div class="secret-headline">            head line        </div>        <header>            <div class="headline">                <a>                    <strong>FindHopes</strong>                </a>                <button class="button-signup" onclick="window.location.href='http://localhost:8080/account'">My account</button>                <div class="button-base">                    <button class="button-signup" onclick="window.location.href='http://localhost:8080/register'">Sign up</button>                    <button class="button-signup" onclick="window.location.href='http://localhost:8080/login'">Log in</button>                </div>            </div>        </header>        <div id="project">            <div class="button-back"><router-link :to="{ name:'projects'}">Back</router-link></div>            <div class="projectTitle">                <div style="font-size:40px;">{{ project.title }}</div>                <div style="font-size:20px;"><small>{{ project.subtitle }}</small></div>            </div>            <div class="projectImage">                <img v-bind:src="'http://csse-s365.canterbury.ac.nz:5199/api/v2/' + project.imageUri" alt="error" height="600" width="800">            </div>            <div class="projectDes">                <div style="padding-top: 20px"><small>Creator:{{ project.creators[0].username }}</small></div>                <h2 style="padding-top: 50px"><strong>Description</strong></h2>                <small>{{ project.description }}</small>                <div style="margin-top:70px"><small>Funding target:</small>{{project.target}}</div>                <div style="margin-top:70px"><small>Creation Date: </small>{{newDate.toLocaleDateString()}}</div>            </div>            <div class="projectReward" v-for="reward in project.rewards">                <tr>                    <th style="margin-top:70px"><small>Amout</small></th>                    <td ><small>{{reward.amount}}</small></td>                </tr>                <tr >                    <th><small>Description</small></th>                    <td><small>{{reward.description}}</small></td>                </tr>            </div>            <div class="projectReward">                <tr>                    <th><small>Current Pledge</small></th>                    <td>{{project.progress.currentPledged}}</td>                    <td><button type="button" class="button-login" style="width:60px" onclick="window.location.href='http://localhost:8080/createPledge'">Pledge</button></td>                </tr>                <tr>                    <th><small>Backer Nums</small></th>                    <td>{{project.progress.numberOfBackers}}</td>                </tr>            </div>            <div class="projectReward" v-for="backer in backers">                <tr>                    <th>Username</th>                    <td>{{backer.username}}</td>                </tr>                <tr>                    <th>Amount</th>                    <td>{{backer.amount}}</td>                </tr>            </div>            <div v-if="!session_flag" style="margin-top: 100px">                <span >Login to create a new project or make a pledge</span><br><br>            </div>            <!-- close_project_modal -->            <div>                 <h4>Close Project</h4>                        <div id="close_project">                            <form>                                <div>                                    <p style="font-weight: bold; font-family: 'Times New Roman', Times, serif;"><small>&nbsp&nbsp&nbsp&nbspAre you sure to close this project?</small></p>                                </div>                                <div >                                    <button type="button" class="button-login" style="width:60px" @click="close_project()">Yes</button>                                    <button type="button" class="button-login" style="width:60px" data-dismiss="modal">No</button>                                </div>                            </form>                        </div>            </div>            </div>        </div>    </div></template><script>    import TypeButton from "./Button/TypeButton.vue";    export default {        components: {TypeButton},        data (){            return{                error:"",                errorFlag: false,                project:null,                msg:"",                newDate: new Date(),                backers:[],            }        },        mounted: function () {            this.getSingleProject(this.$route.params.projectId);        },        methods: {            getSingleProject: function (Pid) {                this.$http.get('http://csse-s365.canterbury.ac.nz:5199/api/v2/projects/' + Pid)                    .then(function (res) {                        this.project=res.body;                        var timestamp = this.project.creationDate;                        this.newDate.setTime(timestamp);                        if(this.project.length!=0){                            for(let backer1 of this.project.backers){                                if(backer1.username=='anonymous'){                                    this.ano_total+=parseInt(backer1.amount);                                }                            }                            let ano_flag=0;                            for(let backer of this.project.backers){                                if(backer.username=='anonymous') {                                    if (ano_flag == 0) {                                        backer.amount=this.ano_total;                                        this.backers.push(backer);                                        ano_flag = 1;                                    } else {                                        continue;                                    }                                }else{                                    this.backers.push(backer);                                }                                if(this.backers.length>=5){                                    break;                                }                            }                        }                    });                },            close_project(){                this.$http.put('http://csse-s365.canterbury.ac.nz:5199/api/v2/projects/'+this.$session.get('id'),                    {                        "open": false                    },                    {                        headers:                            {                                'X-Authorization': this.$session.get('token')                            }                    }                ).then(function(res){                    $("#close_project_modal").modal('hide');                    this.$router.push({path: '/my_project'});                });            },            }        }</script>